# QS v1.0 (узгоджено з WA) — Quality Standards

> Узгоджено з **Working Agreements v2.0 (WA)**. Відхилення дозволені лише за політикою “Відхилення” (з причиною, сферами, таймбоксом і планом відкату) та з фіксацією в IRM.

## P0 — Обов’язково (ядро якості)
1. **One‑step flow** *(WA‑9)* — виконуємо рівно один крок/підкрок за раз. Рух далі — лише після явного підтвердження “крок завершено”.
2. **Безпека й секрети** *(WA‑10, WA‑8)* — попереджаю перед командами, що можуть вивести секрети; ключі/токени ніколи не потрапляють у код/логи/чат; `.gitignore` актуальний.
3. **SSOT + DoD** — IRM/README є єдиним джерелом істини; відхилення фіксуються як exception в IRM. **DoD**: збірка/ран компілюється, тести зелені локально, README/CHANGELOG оновлені, CI (якщо є) зелений, немає TODO/DEBUG, посилання на артефакти перевірені.
4. **Windows‑only чіткість виконання** *(WA‑6, WA‑11)* — завжди вказую, що запускається у **PowerShell / VS Code “Термінал”**, а що — копі‑паст у файли.
5. **Стиль коду (Python)** — повні type hints, коментарі англійською; відсутні “мертві” імпорти/змінні *(WA‑5)*; модулі лаконічні.
6. **Тестування** *(WA‑4)* — `pytest` + `pytest-cov`; покриття зміненого коду ≥ 85% рядків; детерміновані тести (fixed seed), без мережі/диску, якщо не потрібно.
7. **Надійність** — жодних `bare except`; таймаути на I/O; ретраї з backoff+джитер; ліміти на черги/потоки, щоб не залипало.

## P1 — Високий пріоритет (quality gate)
8. **Відтворюваність** — пінені версії (lockfile/requirements); однакові PowerShell‑команди й Windows‑шляхи; фіксуємо версії інструментів при зміні поведінки.
9. **Документація** *(WA‑3)* — кожна суттєва зміна доповнює README/CHANGELOG; короткі usage‑блоки та приклади.
10. **Конфіг і дані** — `.env.template`, відсутність реальних ключів у репо; за замовчуванням синтетичні/демо‑дані (ніяких live‑дій без окремого попередження).
11. **Логування** — DEBUG (dev), INFO (звичайно); шляхи логів задокументовані; секрети/PII у логи не потрапляють.
12. **Бекапи перед змінами стану** — перед міграціями/скриптами: timestamp‑бекап у `dev/tmp/...` (у `.gitignore`).

## P2 — Інженерна гігієна та ергономіка
13. **Структура артефактів** *(WA‑7)* — тимчасові/вивідні файли — тільки в окремих теках; корінь чистий.
14. **Гілки й коміти** — малі зміни; Conventional Commits (`feat:`, `fix:`, …) + номер кроку; гілки `step-X.Y.Z-feature`.
15. **PR‑чекліст (self‑review)** — тести/лінтери/ковередж пройдені, доки оновлені, немає випадкових файлів, TODO прибрані.
16. **Продуктивність і ліміти** — базові бюджети часу/пам’яті на “гарячих” шляхах; проста профілююча перевірка за ризику.

---

## Мінімальний набір інструментів
- **Лінтери/форматери**: `ruff` (+`ruff format`), `isort`.
- **Тести**: `pytest` + `pytest-cov`.
- **pre-commit**: запуск лінтерів/форматерів перед комітами (початково — *manual*).

## Політика відхилень
Лише для зниження ризику або прискорення навчання; завжди: причина, сфера, таймбокс, план відкату; фіксація в IRM як “Exception”, до кінця кроку — або інтегруємо у стандарт, або видаляємо.

## Рекомендовані шляхи у репозиторії
- `docs/QUALITY.md` — цей документ (QS v1.0).
- `docs/DoD.md` — визначення “готово” з анкорами для IRM.
- `.github/PULL_REQUEST_TEMPLATE.md` — чекліст PR.
- `.pre-commit-config.yaml`, `.ruff.toml`, `.isort.cfg`, `requirements-dev.txt` — конфіги якості.
